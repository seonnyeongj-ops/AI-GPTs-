# -*- coding: utf-8 -*-
"""ì›¹ì‚¬ì´íŠ¸ ì œì‘ ì½”ë“œ.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1u8WKOaFfZCFeF8-W27SHUXf9yrukCYKS
"""

import os
from flask import Flask, render_template_string, request, redirect, url_for, session
import streamlit as st


# ==========================================
# 1. ì„¤ì • (ë¹„ë°€ë²ˆí˜¸ ë° ë³´ì•ˆí‚¤)
# ==========================================
app = Flask(__name__)
app.secret_key = 'secret_key_1234'  # ì„¸ì…˜ ì•”í˜¸í™” í‚¤ (ë³€ê²½ ê°€ëŠ¥)
ACCESS_PASSWORD = "team2026"        # ğŸ” ì ‘ì† ë¹„ë°€ë²ˆí˜¸

# ==========================================
# 2. ë°ì´í„° (GPT ë„êµ¬ ëª©ë¡)
# ==========================================
gpt_tools = [
    {
        "category": "ğŸ“ ë¬¸ì„œ/ì‘ë¬¸",
        "name": "ë¹„ì¦ˆë‹ˆìŠ¤ ì´ë©”ì¼ ë´‡",
        "desc": "ìƒí™©ë§Œ ë§í•˜ë©´ ê²©ì‹ ìˆëŠ” ë©”ì¼ ì´ˆì•ˆì„ ì‘ì„±í•´ì¤ë‹ˆë‹¤.",
        "link": "https://chatgpt.com/",
        "prompt": "ìƒí™©: [ê±°ë˜ì²˜ì— ë‹¨ê°€ ì¸ìƒ ìš”ì²­].\ní†¤ì•¤ë§¤ë„ˆ: ì •ì¤‘í•˜ì§€ë§Œ ë‹¨í˜¸í•˜ê²Œ.\nìœ„ ë‚´ìš©ìœ¼ë¡œ ì´ë©”ì¼ ì´ˆì•ˆ ì‘ì„±í•´ì¤˜."
    },
    {
        "category": "ğŸ“Š ì—…ë¬´ íš¨ìœ¨",
        "name": "íšŒì˜ë¡ 3ì¤„ ìš”ì•½ê¸°",
        "desc": "ë…¹ì·¨ë¡ì´ë‚˜ ë©”ëª¨ë¥¼ ë„£ìœ¼ë©´ í•µì‹¬ ë‚´ìš©ê³¼ í•  ì¼ì„ ì •ë¦¬í•©ë‹ˆë‹¤.",
        "link": "https://chatgpt.com/",
        "prompt": "ë‹¤ìŒ íšŒì˜ ë‚´ìš©ì„ ìš”ì•½í•˜ê³ , ë‹´ë‹¹ìë³„ Action Itemì„ í‘œë¡œ ì •ë¦¬í•´ì¤˜."
    },
    {
        "category": "ğŸ’¡ ì•„ì´ë””ì–´",
        "name": "ë§ˆì¼€íŒ… ì¹´í”¼ë¼ì´í„°",
        "desc": "ìƒí’ˆ íŠ¹ì§•ì„ ì…ë ¥í•˜ë©´ ë¸”ë¡œê·¸/ì¸ìŠ¤íƒ€ìš© í™ë³´ ë¬¸êµ¬ë¥¼ ë½‘ì•„ì¤ë‹ˆë‹¤.",
        "link": "https://chatgpt.com/",
        "prompt": "2030 ì§ì¥ì¸ì„ íƒ€ê²Ÿìœ¼ë¡œ í•œ 'ê±°ë¶ëª© êµì •ê¸°' ì¸ìŠ¤íƒ€ê·¸ë¨ í™ë³´ ë¬¸êµ¬ 5ê°œ ì¶”ì²œí•´ì¤˜."
    }
]

# ==========================================
# 3. HTML í™”ë©´ ë””ìì¸ (CSS í¬í•¨)
# ==========================================
HTML_TEMPLATE = """
<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Smart Work Portal</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; background-color: #f4f6f8; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: 0 auto; }

        /* ë¡œê·¸ì¸ í™”ë©´ */
        .login-box { background: white; padding: 40px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); text-align: center; max-width: 400px; margin: 100px auto; }
        input[type="password"] { width: 100%; padding: 12px; margin-top: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }

        /* ë©”ì¸ í™”ë©´ */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .btn { padding: 8px 16px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; text-decoration: none; display: inline-block; }
        .btn-primary { background-color: #3b82f6; color: white; }
        .btn-danger { background-color: #ef4444; color: white; }
        .btn-copy { background-color: #e5e7eb; color: #333; font-size: 13px; margin-right: 5px; }

        .card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.03); }
        .badge { display: inline-block; background: #eff6ff; color: #1d4ed8; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-bottom: 8px; }
        .desc { color: #666; font-size: 14px; margin: 5px 0 15px 0; }
        textarea { width: 100%; height: 60px; padding: 10px; border: 1px solid #eee; border-radius: 8px; background: #fafafa; color: #555; resize: none; font-size: 13px; box-sizing: border-box; margin-bottom: 10px; }
    </style>
    <script>
        function copyText(id) {
            var copyText = document.getElementById(id);
            copyText.select();
            document.execCommand("copy");
            alert("í”„ë¡¬í”„íŠ¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
        }
    </script>
</head>
<body>
    {% if not session.get('authenticated') %}
    <!-- ë¡œê·¸ì¸ í™”ë©´ -->
    <div class="login-box">
        <h2>ğŸ”’ ì ‘ì† ê¶Œí•œ ì¸ì¦</h2>
        <p>ì‚¬ë‚´ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
        <form method="POST" action="/login">
            <input type="password" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" required>
            <button type="submit" class="btn btn-primary" style="width:100%; margin-top:15px; padding:12px;">ë¡œê·¸ì¸</button>
        </form>
        {% if error %}<p style="color:red; font-size:13px; margin-top:10px;">{{ error }}</p>{% endif %}
    </div>

    {% else %}
    <!-- ë©”ì¸ í™”ë©´ -->
    <div class="container">
        <div class="header">
            <h2>ğŸš€ AIë‹´ë‹¹ê´€ ì—…ë¬´ë¹„ì„œ</h2>
            <form method="POST" action="/logout" style="margin:0;">
                <button type="submit" class="btn btn-danger">ë¡œê·¸ì•„ì›ƒ</button>
            </form>
        </div>

        {% for tool in tools %}
        <div class="card">
            <span class="badge">{{ tool.category }}</span>
            <h3 style="margin: 5px 0;">{{ tool.name }}</h3>
            <p class="desc">{{ tool.desc }}</p>

            <textarea id="p{{ loop.index }}" readonly>{{ tool.prompt }}</textarea>

            <div style="text-align: right;">
                <button class="btn btn-copy" onclick="copyText('p{{ loop.index }}')">í”„ë¡¬í”„íŠ¸ ë³µì‚¬</button>
                <a href="{{ tool.link }}" target="_blank" class="btn btn-primary">GPT ì‹¤í–‰í•˜ê¸° ğŸ‘‰</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</body>
</html>
"""

# ==========================================
# 4. ì„œë²„ ë¡œì§ (ë¼ìš°íŒ…)
# ==========================================
@app.route('/')
def home():
    return render_template_string(HTML_TEMPLATE, tools=gpt_tools)

@app.route('/login', methods=['POST'])
def login():
    if request.form.get('password') == ACCESS_PASSWORD:
        session['authenticated'] = True
        return redirect('/')
    return render_template_string(HTML_TEMPLATE, error="ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.", tools=gpt_tools)

@app.route('/logout', methods=['POST'])
def logout():
    session.clear()
    return redirect('/')

from google.colab.output import eval_js
if __name__ == '__main__':
    print("----------------------------------------------------------------")
    print("ğŸ‘‡ ì•„ë˜ ë‚˜ì˜¤ëŠ” ê¸´ ì£¼ì†Œë¥¼ í´ë¦­í•˜ì„¸ìš” (ì´ê²Œ ì§„ì§œ ì ‘ì† ì£¼ì†Œì…ë‹ˆë‹¤!)")
    # 5000ë²ˆ í¬íŠ¸ë¥¼ ì™¸ë¶€ë¡œ ì—´ì–´ì£¼ëŠ” ë§ˆë²•ì˜ ì½”ë“œ
    print(eval_js("google.colab.kernel.proxyPort(5000)"))
    print("----------------------------------------------------------------")

    app.run(host='0.0.0.0', port=5000)



